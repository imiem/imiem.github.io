<ul id="markdown-toc">
  <li><a href="#安装-erlang" id="markdown-toc-安装-erlang">安装 erlang</a></li>
  <li><a href="#安装-rabbitmq-server" id="markdown-toc-安装-rabbitmq-server">安装 rabbitmq server</a></li>
  <li><a href="#启动" id="markdown-toc-启动">启动</a></li>
  <li><a href="#安装-web-管理页面" id="markdown-toc-安装-web-管理页面">安装 web 管理页面</a></li>
  <li><a href="#用户管理" id="markdown-toc-用户管理">用户管理</a></li>
  <li><a href="#用户角色" id="markdown-toc-用户角色">用户角色</a></li>
</ul>

<p>在 **centos 7 上安装和配置 rabbitmq。<a href="!http://www.rabbitmq.com/install-rpm.html">官方文档</a>有更加详细的配置</p>

<h2 id="安装-erlang">安装 erlang</h2>
<div class="highlighter-rouge"><pre class="highlight"><code>rabbitmq 需要有 erlang 的环境，如果使用 yum 安装，执行下面的命令 ```  su -c 'rpm -Uvh http://download.fedoraproject.org/pub/epel/7/x86_64/e/epel-release-7-9.noarch.rpm'  su -c 'yum install foo’  yum install erlang ``` 执行完成后可以使用 erlang 进行检查是否安装成功。
</code></pre>
</div>

<h2 id="安装-rabbitmq-server">安装 rabbitmq server</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>rpm --import https://www.rabbitmq.com/rabbitmq-release-signing-key.asc
yum install rabbitmq-server-3.6.10-1.noarch.rpm
</code></pre>
</div>

<h2 id="启动">启动</h2>
<ul>
  <li>设置开机启动
    <div class="highlighter-rouge"><pre class="highlight"><code>chkconfig rabbitmq-server on
</code></pre>
    </div>
  </li>
  <li>启动
    <div class="highlighter-rouge"><pre class="highlight"><code>service rabbitmq-server start
</code></pre>
    </div>
  </li>
  <li>停止
    <div class="highlighter-rouge"><pre class="highlight"><code>service rabbitmq-server stop
</code></pre>
    </div>
  </li>
</ul>

<h2 id="安装-web-管理页面">安装 web 管理页面</h2>
<div class="highlighter-rouge"><pre class="highlight"><code>rabbitmq-plugins enable rabbitmq_management
</code></pre>
</div>
<p>安装完成后就可以使用 http://ip:15672进行访问了，web 页面需要用户，所以下边就需要对用户进行配置</p>

<h2 id="用户管理">用户管理</h2>
<ul>
  <li>用户列表
    <div class="highlighter-rouge"><pre class="highlight"><code>rabbitmqctl  list_users
</code></pre>
    </div>
  </li>
  <li>新增用户
    <div class="highlighter-rouge"><pre class="highlight"><code>rabbitmqctl  add_user  Username  Password
</code></pre>
    </div>
  </li>
  <li>删除用户
    <div class="highlighter-rouge"><pre class="highlight"><code>rabbitmqctl  delete_user  Username
</code></pre>
    </div>
  </li>
  <li>修改密码
    <div class="highlighter-rouge"><pre class="highlight"><code>rabbitmqctl  change_password  Username  Newpassword
</code></pre>
    </div>
  </li>
</ul>

<p>用户添加完成后还不能登录 web 页面，还需要给用户添加角色</p>

<h2 id="用户角色">用户角色</h2>

<ul>
  <li>
    <p>超级管理员(administrator)</p>

    <div class="highlighter-rouge"><pre class="highlight"><code> 可登陆管理控制台(启用management plugin的情况下)，可查看所有的信息，并且可以对用户，策略(policy)进行操作。
</code></pre>
    </div>
  </li>
  <li>
    <p>监控者(monitoring)</p>

    <div class="highlighter-rouge"><pre class="highlight"><code> 可登陆管理控制台(启用management plugin的情况下)，同时可以查看rabbitmq节点的相关信息(进程数，内存使用情况，磁盘使用情况等)
</code></pre>
    </div>
  </li>
  <li>
    <p>策略制定者(policymaker)</p>

    <p>可登陆管理控制台(启用management plugin的情况下), 同时可以对policy进行管理。但无法查看节点的相关信息。</p>
  </li>
  <li>
    <p>普通管理者(management)</p>

    <p>仅可登陆管理控制台(启用management plugin的情况下)，无法看到节点信息，也无法对策略进行管理。</p>
  </li>
  <li>
    <p>其他</p>

    <p>无法登陆管理控制台，通常就是普通的生产者和消费者。
  了解了这些后，就可以根据需要给不同的用户设置不同的角色，以便按需管理。</p>
  </li>
</ul>

<p>赋予用户角色</p>
<div class="highlighter-rouge"><pre class="highlight"><code>rabbitmqctl  set_user_tags  User  Tag
</code></pre>
</div>
<p>一个用户可以有多个角色，多个 tag 使用空格分开即可</p>

